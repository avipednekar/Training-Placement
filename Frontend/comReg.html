<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Company Registration</title>
  <script src="https://cdn.tailwindcss.com/3.4.16"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: { primary: "#4F46E5", secondary: "#818CF8" },
          borderRadius: {
            none: "0px",
            sm: "4px",
            DEFAULT: "8px",
            md: "12px",
            lg: "16px",
            xl: "20px",
            "2xl": "24px",
            "3xl": "32px",
            full: "9999px",
            button: "8px",
          },
        },
      },
    };
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@300;400;500;600;700&display=swap"
    rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css" rel="stylesheet" />
  <style>
    :where([class^="ri-"])::before {
      content: "\f3c2";
    }

    body {
      font-family: 'Poppins', sans-serif;
    }

    .form-control {
      transition: all 0.3s ease;
    }

    .form-control:focus {
      outline: none;
      border-color: #4F46E5;
      box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.2);
      transform: translateY(-1px);
    }

    .form-control:hover {
      border-color: #4F46E5;
    }

    .hover-card {
      transition: all 0.3s ease;
    }

    .hover-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    }

    input[type="number"]::-webkit-inner-spin-button,
    input[type="number"]::-webkit-outer-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    .password-toggle {
      cursor: pointer;
    }

    .success-modal {
      transform: translateY(-20px);
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }

    .success-modal.show {
      transform: translateY(0);
      opacity: 1;
      visibility: visible;
    }
  </style>
</head>

<body class="min-h-screen bg-gray-50">
  <div class="flex flex-col md:flex-row min-h-screen">
    <!-- Left Panel - Brand Introduction -->
    <div class="w-full md:w-2/5 relative overflow-hidden p-8 flex flex-col justify-center items-center text-white">
      <div class="absolute inset-0 bg-gradient-to-br from-primary to-secondary opacity-95"></div>
      <div class="absolute inset-0">
        <img
          src="https://readdy.ai/api/search-image?query=modern%20corporate%20office%20interior%20with%20glass%20walls%20and%20workstations%2C%20minimalist%20design%2C%20bright%20and%20airy%20space%20with%20natural%20lighting%2C%20professional%20business%20environment%2C%20high-end%20finishes%2C%20clean%20lines%20and%20contemporary%20furniture&width=800&height=1200&seq=1&orientation=portrait"
          class="w-full h-full object-cover" alt="Office Background" />
      </div>
      <div class="max-w-md mx-auto text-center relative z-10">
        <h1 class="text-3xl md:text-4xl font-bold mb-6 hover:scale-105 transition-transform text-white">
          Company Portal
        </h1>
        <p class="text-base md:text-lg leading-relaxed opacity-90">
          Connect with talented students from our college for internships and
          full-time positions. Post jobs, schedule interviews, and find the
          perfect candidates for your organization.
        </p>
        <div class="mt-10">
          <div
            class="w-20 h-20 flex items-center justify-center bg-white/20 backdrop-blur-sm rounded-full mx-auto mb-4 hover:scale-110 transition-transform duration-300 hover:bg-white/30">
            <i class="ri-building-4-line ri-3x"></i>
          </div>
          <p class="text-sm opacity-80">
            Join 500+ companies already recruiting from our campus
          </p>
        </div>
      </div>
    </div>
    <!-- Right Panel - Registration Form -->
    <div class="w-full md:w-3/5 bg-white p-6 md:p-12 flex items-center">
      <div class="w-full max-w-xl mx-auto hover-card bg-white rounded-lg p-6 md:p-8">
        <div class="mb-8">
          <h2 class="text-2xl font-bold text-gray-800">
            Company Registration
          </h2>
          <p class="text-gray-600 mt-2">
            Create your account to access the recruitment portal
          </p>
        </div>
        <form id="registrationForm" class="space-y-6">
          <div class="space-y-4">
            <div>
              <label for="companyName" class="block text-sm font-medium text-gray-700 mb-1">Company Name <span
                  class="text-red-500">*</span></label>
              <input type="text" id="companyName" name="companyName"
                class="form-control w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded text-gray-800 focus:bg-white transition-colors"
                placeholder="Enter your company name" required />
            </div>
            <div>
              <label for="companyAddress" class="block text-sm font-medium text-gray-700 mb-1">Company Address <span
                  class="text-red-500">*</span></label>
              <textarea id="companyAddress" name="companyAddress" rows="3"
                class="form-control w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded text-gray-800 focus:bg-white transition-colors"
                placeholder="Enter your company address" required></textarea>
            </div>
            <div>
              <label for="industryDomain" class="block text-sm font-medium text-gray-700 mb-1">Industry Domain <span
                  class="text-red-500">*</span></label>
              <div class="relative">
                <select id="industryDomain" name="industryDomain"
                  class="form-control w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded text-gray-800 focus:bg-white transition-colors appearance-none pr-8"
                  required>
                  <option value="" disabled selected>
                    Select your industry
                  </option>
                  <option value="technology">Technology</option>
                  <option value="finance">Finance & Banking</option>
                  <option value="healthcare">Healthcare</option>
                  <option value="education">Education</option>
                  <option value="manufacturing">Manufacturing</option>
                  <option value="retail">Retail</option>
                  <option value="consulting">Consulting</option>
                  <option value="other">Other</option>
                </select>
                <div class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none">
                  <i class="ri-arrow-down-s-line text-gray-500"></i>
                </div>
              </div>
            </div>
            <div>
              <label for="Email" class="block text-sm font-medium text-gray-700 mb-1">Email Address <span
                  class="text-red-500">*</span></label>
              <input type="email" id="Email" name="Email"
                class="form-control w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded text-gray-800 focus:bg-white transition-colors"
                placeholder="company@example.com" required />
            </div>
            <div>
              <label for="password" class="block text-sm font-medium text-gray-700 mb-1">Password <span
                  class="text-red-500">*</span></label>
              <div class="relative">
                <input type="password" id="password" name="password"
                  class="form-control w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded text-gray-800 focus:bg-white transition-colors"
                  placeholder="Create a strong password" required />
                <div class="absolute inset-y-0 right-0 flex items-center px-3 cursor-pointer password-toggle"
                  data-for="password">
                  <i class="ri-eye-line text-gray-500"></i>
                </div>
              </div>
              <div class="mt-2 flex gap-2">
                <span class="h-1 flex-1 rounded-full bg-gray-200" id="strength-1"></span>
                <span class="h-1 flex-1 rounded-full bg-gray-200" id="strength-2"></span>
                <span class="h-1 flex-1 rounded-full bg-gray-200" id="strength-3"></span>
                <span class="h-1 flex-1 rounded-full bg-gray-200" id="strength-4"></span>
              </div>
              <p class="text-xs text-gray-500 mt-1" id="password-strength-text">
                Password strength
              </p>
            </div>
            <div>
              <label for="confirmPassword" class="block text-sm font-medium text-gray-700 mb-1">Confirm Password <span
                  class="text-red-500">*</span></label>
              <div class="relative">
                <input type="password" id="confirmPassword" name="confirmPassword"
                  class="form-control w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded text-gray-800 focus:bg-white transition-colors"
                  placeholder="Confirm your password" required />
                <div class="absolute inset-y-0 right-0 flex items-center px-3 cursor-pointer password-toggle"
                  data-for="confirmPassword">
                  <i class="ri-eye-line text-gray-500"></i>
                </div>
              </div>
              <p class="text-xs text-red-500 mt-1 hidden" id="password-match-error">
                Passwords do not match
              </p>
            </div>
          </div>
          <div class="pt-4">
            <button type="submit"
              class="w-full bg-primary hover:bg-primary/90 text-white py-3 px-4 !rounded-button font-medium transition-all duration-300 whitespace-nowrap flex items-center justify-center hover:shadow-lg hover:scale-[1.02] active:scale-[0.98]">
              <span>Register Company</span>
              <i class="ri-arrow-right-line ml-2"></i>
            </button>
          </div>
          <div class="text-center text-sm text-gray-600 mt-6">
            Already have an account?
            <a href="/Frontend/ComLogin.html"
              class="text-primary hover:text-primary/80 font-medium relative inline-block after:content-[''] after:absolute after:w-full after:h-0.5 after:bg-primary after:left-0 after:bottom-0 after:origin-right after:scale-x-0 hover:after:scale-x-100 hover:after:origin-left after:transition-transform after:duration-300">Sign
              in</a>
          </div>
        </form>
      </div>
    </div>
  </div>
  <!-- Success Modal -->
  <div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden" id="success-modal">
    <div class="success-modal bg-white rounded-lg shadow-xl max-w-md w-full mx-4 p-6">
      <div class="text-center">
        <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
          <i class="ri-check-line ri-2x text-green-600"></i>
        </div>
        <h3 class="text-xl font-bold text-gray-900 mb-2">
          Registration Successful!
        </h3>
        <p class="text-gray-600 mb-6">
          Your company account has been created successfully. You can now log
          in to access the recruitment portal.
        </p>
        <a href="/Frontend/ComLogin.html">
          <button id="close-modal"
            class="bg-primary hover:bg-primary/90 text-white py-2 px-6 !rounded-button font-medium transition-colors whitespace-nowrap">
            Continue to Login
          </button>
        </a>
      </div>
    </div>
  </div>
</body>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.getElementById("registrationForm");
    const successModal = document.getElementById("success-modal");
    const closeModalBtn = document.getElementById("close-modal");
    const passwordInput = document.getElementById("password");
    const confirmPasswordInput = document.getElementById("confirmPassword");
    const passwordMatchError = document.getElementById("password-match-error");

    // Password visibility toggle
    const toggleButtons = document.querySelectorAll(".password-toggle");
    toggleButtons.forEach((button) => {
      button.addEventListener("click", function () {
        const targetId = this.getAttribute("data-for");
        const passwordInput = document.getElementById(targetId);
        const icon = this.querySelector("i");
        if (passwordInput.type === "password") {
          passwordInput.type = "text";
          icon.classList.remove("ri-eye-line");
          icon.classList.add("ri-eye-off-line");
        } else {
          passwordInput.type = "password";
          icon.classList.remove("ri-eye-off-line");
          icon.classList.add("ri-eye-line");
        }
      });
    });

    // Password strength checker
    const strengthBars = [
      document.getElementById("strength-1"),
      document.getElementById("strength-2"),
      document.getElementById("strength-3"),
      document.getElementById("strength-4"),
    ];
    const strengthText = document.getElementById("password-strength-text");
    passwordInput.addEventListener("input", function () {
      const password = this.value;
      let strength = 0;
      if (password.length >= 8) strength++;
      if (password.match(/[A-Z]/)) strength++;
      if (password.match(/[0-9]/)) strength++;
      if (password.match(/[^A-Za-z0-9]/)) strength++;
      strengthBars.forEach((bar, index) => {
        if (index < strength) {
          bar.classList.remove("bg-gray-200");
          if (strength === 1) bar.classList.add("bg-red-500");
          else if (strength === 2) bar.classList.add("bg-orange-500");
          else if (strength === 3) bar.classList.add("bg-yellow-500");
          else bar.classList.add("bg-green-500");
        } else {
          bar.className = "h-1 flex-1 rounded-full bg-gray-200";
        }
      });
      if (strength === 0) strengthText.textContent = "Password strength";
      else if (strength === 1) strengthText.textContent = "Weak";
      else if (strength === 2) strengthText.textContent = "Fair";
      else if (strength === 3) strengthText.textContent = "Good";
      else strengthText.textContent = "Strong";
    });

    // Password match validation
    function checkPasswordMatch() {
      if (passwordInput.value && confirmPasswordInput.value) {
        if (passwordInput.value !== confirmPasswordInput.value) {
          passwordMatchError.classList.remove("hidden");
          return false;
        } else {
          passwordMatchError.classList.add("hidden");
          return true;
        }
      }
      return true;
    }
    confirmPasswordInput.addEventListener("input", checkPasswordMatch);
    passwordInput.addEventListener("input", function () {
      if (confirmPasswordInput.value) checkPasswordMatch();
    });

    // FORM SUBMIT
    form.addEventListener("submit", async function (e) {
      e.preventDefault();
      if (!checkPasswordMatch()) return;

      const companyData = {
        name: document.getElementById('companyName').value,
        address: document.getElementById('companyAddress').value,
        domain: document.getElementById('industryDomain').value,
        email: document.getElementById('Email').value,
        password: passwordInput.value
      };

      try {
        const response = await fetch('http://localhost:3000/api/company/register', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(companyData)
        });
        const result = await response.json();

        if (response.ok) {
          // If registration successful, show success modal
          successModal.classList.remove("hidden");
          setTimeout(() => {
            successModal.querySelector(".success-modal").classList.add("show");
          }, 10);
        } else {
          // If error from backend
          alert(result.message || "Something went wrong!");
        }
      } catch (error) {
        console.error("Error:", error);
        alert("Network error! Please try again later.");
      }
    });

    closeModalBtn.addEventListener("click", function () {
      successModal.querySelector(".success-modal").classList.remove("show");
      setTimeout(() => {
        successModal.classList.add("hidden");
        window.location.href = "/Frontend/ComLogin.html"; // redirect after closing modal
      }, 300);
    });
  });
</script>

</html>