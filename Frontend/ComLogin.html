<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Company Portal Login</title>
  <script src="https://cdn.tailwindcss.com/3.4.16"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: { primary: "#2563EB", secondary: "#4B5563" },
          borderRadius: {
            none: "0px",
            sm: "4px",
            DEFAULT: "8px",
            md: "12px",
            lg: "16px",
            xl: "20px",
            "2xl": "24px",
            "3xl": "32px",
            full: "9999px",
            button: "8px",
          },
        },
      },
    };
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css" />
  <style>
    :where([class^="ri-"])::before {
      content: "\f3c2";
    }

    body {
      font-family: 'Inter', sans-serif;
      background-color: #F9FAFB;
    }

    @keyframes float {
      0% {
        transform: translateY(0px);
      }

      50% {
        transform: translateY(-5px);
      }

      100% {
        transform: translateY(0px);
      }
    }

    @keyframes pulse {
      0% {
        box-shadow: 0 0 0 0 rgba(37, 99, 235, 0.4);
      }

      70% {
        box-shadow: 0 0 0 10px rgba(37, 99, 235, 0);
      }

      100% {
        box-shadow: 0 0 0 0 rgba(37, 99, 235, 0);
      }
    }

    .social-btn {
      transition: all 0.3s ease;
    }

    .social-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .input-focus-effect {
      position: relative;
    }

    .input-focus-effect::after {
      content: '';
      position: absolute;
      width: 0;
      height: 2px;
      bottom: 0;
      left: 50%;
      background-color: #2563EB;
      transition: all 0.3s ease;
      transform: translateX(-50%);
    }

    .input-focus-effect:focus-within::after {
      width: 100%;
    }

    .login-btn-hover {
      position: relative;
      overflow: hidden;
      transition: all 0.3s ease;
    }

    .login-btn-hover::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.1);
      transform: translate(-50%, -50%) scale(0);
      border-radius: 50%;
      transition: transform 0.5s ease;
    }

    .login-btn-hover:hover::before {
      transform: translate(-50%, -50%) scale(2);
    }

    .floating-effect {
      animation: float 3s ease-in-out infinite;
    }

    input[type="number"]::-webkit-inner-spin-button,
    input[type="number"]::-webkit-outer-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    .custom-checkbox {
      position: relative;
      display: flex;
      align-items: center;
      cursor: pointer;
    }

    .custom-checkbox input {
      position: absolute;
      opacity: 0;
      cursor: pointer;
      height: 0;
      width: 0;
    }

    .checkmark {
      height: 18px;
      width: 18px;
      background-color: #fff;
      border: 1px solid #D1D5DB;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .custom-checkbox input:checked~.checkmark {
      background-color: #2563EB;
      border-color: #2563EB;
    }

    .checkmark:after {
      content: "";
      display: none;
    }

    .custom-checkbox input:checked~.checkmark:after {
      display: block;
      width: 5px;
      height: 10px;
      border: solid white;
      border-width: 0 2px 2px 0;
      transform: rotate(45deg);
      margin-bottom: 2px;
    }
  </style>
</head>

<body class="min-h-screen">
  <div class="flex flex-col md:flex-row min-h-screen">
    <!-- Left Panel -->
    <div
      class="w-full md:w-1/2 bg-primary bg-opacity-5 flex flex-col items-start justify-center p-8 md:p-16 relative overflow-hidden">
      <div class="max-w-md mx-auto md:mx-0 w-full">
        <!-- <h1 class="font-['Pacifico'] text-primary text-3xl mb-16 floating-effect">
          COMPANY PORTAL
        </h1> -->
        <img src="./assets/logo-wide.png" class="mb-12 h-24">
        <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
          Welcome Back!
        </h2>
        <p class="text-gray-600 text-lg mb-8">
          Access your company dashboard to manage job postings, schedule
          interviews, and connect with potential candidates all in one place.
        </p>
        <div class="hidden md:block mt-8">
          <img
            src="https://readdy.ai/api/search-image?query=professional%20business%20team%20working%20together%20in%20a%20modern%20office%20environment%2C%20diverse%20group%20of%20people%20collaborating%2C%20soft%20lighting%2C%20professional%20atmosphere%2C%20minimal%20design%2C%20blue%20tones&width=600&height=400&seq=1&orientation=landscape"
            alt="Business team collaboration" class="rounded-lg shadow-lg object-cover object-top w-full h-auto" />
        </div>
      </div>
    </div>
    <!-- Right Panel -->
    <div class="w-full md:w-1/2 bg-white flex items-center justify-center p-6 md:p-12">
      <div class="w-full max-w-md">
        <div class="bg-white rounded-lg p-8 shadow-sm border border-gray-100">
          <div class="text-center mb-8">
            <h2 class="text-2xl font-bold text-gray-900 mb-2">
              Company Login
            </h2>
            <p class="text-gray-500">
              Enter your credentials to access your account
            </p>
          </div>
          <form id="loginForm" class="space-y-6">
            <div>
              <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
              <div class="relative">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                  <div class="w-5 h-5 flex items-center justify-center text-gray-400">
                    <i class="ri-mail-line"></i>
                  </div>
                </div>
                <div class="input-focus-effect">
                  <input id="email" type="email"
                    class="pl-10 w-full h-12 border border-gray-300 rounded-button focus:ring-2 focus:ring-primary focus:border-primary text-sm transition-all duration-300 hover:border-primary/50"
                    placeholder="company@example.com" />
                </div>
              </div>
            </div>
            <div> 
              <div class="flex items-center justify-between mb-1">
                <label for="password" class="block text-sm font-medium text-gray-700">Password</label>
              </div>
              <div class="relative">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                  <div class="w-5 h-5 flex items-center justify-center text-gray-400">
                    <i class="ri-lock-line"></i>
                  </div>
                </div>
                <div class="input-focus-effect">
                  <input id="password" type="password"
                    class="pl-10 w-full h-12 border border-gray-300 rounded-button focus:ring-2 focus:ring-primary focus:border-primary text-sm transition-all duration-300 hover:border-primary/50"
                    placeholder="••••••••" />
                </div>
              </div>
            </div>
            <div class="flex items-center justify-between">
              <label class="custom-checkbox flex items-center">
                <input type="checkbox" id="remember" />
                <span class="checkmark mr-2"></span>
                <span class="text-sm text-gray-600">Remember me</span>
              </label>
              <a href="#" class="text-sm font-medium text-primary hover:text-primary-700">Forgot password?</a>
            </div>
            <button type="submit"
              class="w-full bg-primary text-white py-3 rounded-button hover:bg-primary/90 transition duration-200 font-medium !rounded-button whitespace-nowrap login-btn-hover">
              Log in
            </button>
          </form>
          <div class="mt-8 text-center">
            <p class="text-sm text-gray-600">
              Don't have an account?
              <a href="#" class="font-medium text-primary hover:text-primary-700">Register here</a>
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.getElementById('loginForm');
    const emailInput = document.getElementById('email');
    const passwordInput = document.getElementById('password');
    const rememberCheckbox = document.getElementById('remember');
    const loginBtn = form.querySelector('button[type="submit"]');
    const originalBtnText = loginBtn.textContent;

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      const loginData = {
        email: emailInput.value,
        password: passwordInput.value,
      };

      const remember = rememberCheckbox.checked;
      console.log("Login attempt:", { ...loginData, remember });

      loginBtn.disabled = true;
      loginBtn.textContent = 'Logging in...';

      try {
        const response = await fetch('http://localhost:3000/company-login', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Accept': 'application/json',
          },
          body: JSON.stringify(loginData),
        });

        if (!response.ok) {
          const errorData = await response.json();
          throw new Error(errorData.error || 'Login failed');
        }

        const data = await response.json();

        const userWithToken = {
          ...data.user,
          token: data.token,
        };

        localStorage.setItem('user', JSON.stringify(userWithToken));
        window.location.href = '/Frontend/Company.html';
      } catch (error) {
        console.error('Login error:', error);
        alert(error.message || 'Login failed. Please try again.');
      } finally {
        loginBtn.disabled = false;
        loginBtn.textContent = originalBtnText;
      }
    });
  });
</script>

</html>